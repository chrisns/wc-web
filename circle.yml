machine:
  services:
    - docker
#  node:
#    version: stable
  environment:
    dockename: wecomp/wc-web
    dockertag: ${CIRCLE_BRANCH}_${CIRCLE_BUILD_NUM}

dependencies:
  pre:
  - docker build -t ${dockename}-be:${dockertag} be
  - docker build -t ${dockename}-fe:${dockertag} fe

#test:
#  override:
#    - meteor npm test
#  post:
#    - meteor build --architecture os.linux.x86_64 --server-only --directory ./
#    - docker build -t ${dockerref} .

#deployment:
#  hub:
#    branch: master
#    commands:
#     - docker login -e ${DOCKER_EMAIL} -u ${DOCKER_USER} -p {$DOCKER_PASS}
#     - docker push ${dockerref}